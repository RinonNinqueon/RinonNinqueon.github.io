---
layout: post
title:  'DriveIt! ревизия 4'
date:   2019-07-15 16:30:21
categories: schematics
tags: schematics diy driveit
---
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
		<center>
          <div class="modal-body">               
          </div>
		</center>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

<div class="thumbnails">
</div>

С последней переделки прошло уже много времени. К тому же, я пользуюсь самой первой версией своей платы на два канала. Естественно, что что-то пойдёт не так и придётся чинить.  
Вот об устранении, вернее, предотвращении этих неисправностей мы и поговорим.  

### Проблемы в эксплуатации

#### Выключатели
Это самая больная тема. Выключателя два, каждый сидит 9-ю ногами в плате. Учитывая мою криворукость, отверстия в корпусе не совсем совпадают с реальным расположением элементов, поэтому всё немного стоит наперекосяк.  
А теперь нажмём на выключатель, да не один раз, а много и сильно. Из-за перекоса нагрузка распределяется неравномерно, и может вырвать крепление кожуха с выключателя. Также, расшатываются посадочные места в плате, срывается припой, иногда вместе с дорожками. Не очень приятно.  

#### Переменные резисторы
Здесь опять проблема в позиционировании, но она не единственная.  
Резисторы сидят на переходной плате, которая угловыми штырями припаяна к основной. Это довольно крупная точка отказа. Сколько раз я уже всё пропаивал...

#### Аудио-разъёмы
Так как у меня разъёмы впаиваются на плату, а крепятся к корпусу снаружи, мы снова упираемся в точность сверловки. Крепёж очень здорово ломает пластик самого разъёма, из-за чего штекер будет болтаться, а щвук пропадать.  

### Решение

Для начала я решил на своей подопытной плате убрать один выключатель, который больше всего использовался.  
Недавно была статья про [байпас на поляризованном реле](http://rinonninqueon.ru/schematics/bypass_bistable_relay/). Его я и поставил на переключения каналов. В качестве управляющего сигнала - выключатель с фиксацией, который перекидывает землю с питанием. Схема себя неплохо зарекомендовала, поэтому я сделал так и на байпас.  
Решение с резисторами напрашивается само собой - сразу ставить вертикальные переменники. Вот только найти их, на первый взгляд, трудновато.  
Разъёмы просто берём самые обычные и крепим их на корпус, а не основную плату.  

### Детали

Для байпаса я решил брать кнопки без фиксации, но это тянуло за собой триггер, так что пришлось искать схемку попроще. Хотя, мне нравился вариант установки состояния при включении (вывод S + RC цепочка).  
На схеме одного устройства (я когда-нибудь сделаю что-нибудь по его подобию) я увидел интересный вариант на CD4011, это как наша ЛА3, но только CMOS. Обвязка в два резистора и конденсатор очень порадовала. При этом, схема справлялась с дребезгом контактов.  
Я попробовал её доработать, чтобы при включении всегда устанавливалось одно состояние, с логической 1 на выходе. В симуляторе всё работало, на макетке тоже. А вот в самом устройстве я не особо понял что происходит: один канал работал, а второй заклинило в одном состоянии. Ну и ладно, переживём. (Оно как-то само заработало.) Остаётся только индикация, она подключается банально, через транзистор. По факту я ошибся с точностью до наоборот - похоже, китайцы зеркально скопировали реле, и полярность сменилась.  

Стандартные переменные резисторы с вертикальной посадкой я так и не нашёл. По крайней мере нужных мне номиналов, да ещё за приемлемую цену. Как альтернатива - ALPS RK09L. У нас их особо не найти, зато в Китае я нашёл целый магазинчик промышляющий продажей их клонами. Это точно не оригинал, потому что разброс сопротивлений просто ужасен. Из двух зол пришлось выбирать меньшее, так что решил попробовать подешевле, но похуже. Ничего, работает.  

Помимо этого я заменил максимум неполярных конденсаторов на плёнку. Вернее, металлоплёнку. Это такие маленькие зелёненькие конденсаторы. Резисторы в темброблоке тоже выводные. И вообще, по максимуму старался применить выводные компоненты.  
Изменения также коснулись и разъёмов. Jack теперь не на плате, а разъём питания - наоборот. Ещё добавил второй светодиод для индикации канала.  

### Схема

По схеме изменений нет, за исключением того, что вместо выключателей встали реле, а входы двух каналов сразу соединены между собой.  
Если руки доберутся -- выложу)  

### Сборка

Тут меня ждал сюрприз в виде платы, сделанной впритык. Пришлось чуть убрать металл у стоек для винтов, чтобы переменники туда влезли.  
Второй сюрприз - резьба переменников слишком короткая. Понятно, что производитель имел в виду посадку с ключом, но он-то мне как раз не нужен. Но, помимо этого, вставал вопрос о высоте компонентов: конденсаторы и разъём питания не хотели помещаться всего на пару миллиметров. Решил я это при помощи пластины, к которой крепятся переменные резисторы. Размером она ровно такая, чтобы закрепить на ней переменные резисторы. А сама пластина уже крепится к корпусу (берите пластину потолще, чтобы резьбу нарезать), через небольшие проставки (хватит и одной гайки большего диаметра).
Кнопки и аудиоразъёмы я соединил на разъёмах (клёвая тавтология), это для удобства демонтажа.  

Сам монтаж то ещё извращение, с этим надо будет что-то делать. Вот пошаговая инструкция для корпуса Gainta G0471:  
1. Вставить входной разъём, но не закручивать. Пусть болтается.
2. Привинтить кнопки, присоединить разъёмы кнопок к плате.
3. Вставить в корпус болты (М3) с шайбами. Перевернуть (и держать все три!), положить гайки М4 вместо проставок.
4. Продолжаем держать три болта одной рукой. Другой вставляем плату под углом, чуть отгибая входной разъём третей. (Если у вас нет третей руки, ничего не получится)
5. Когда всё состыкуется, можно перевернуть обратно (держим плату!) и прикрутить болты к переходной пластине (вы же по шаблону делали, да?)
6. Загнуть выходной разъём раком и запихать его на место. Возможно, придётся чуть-чуть расширить отверстие. Надфилем, естественно.
7. Прикрутить наконец-то аудиоразъёмы.
8. Присоединить разъёмы аудиоразъёмов (обожаю) к плате.
9. Привинтить крышку корпуса и осознать, что она замыкает контакты Jack'у. Спилить где надо бортик, сделать маникюр (или это педикюр?) Jack и его плате. В смысле, надфилем спилить всё, что неприлично торчит, и заизолировать лаком. Не забыть про синюю изоленту! Её наклейка на крышку, в районе разъёмов, делает всё надёжней.
10. Снова привинтить крышку
11. ...
12. profit!

### Тестируем

Звук изменился. Серьёзно, он стал более мягким, что ли, но стратокастер звучит даже интересней. На чистом канале получилось словить эффект компрессора - ставим максимум precense и neck+mid звучки, усиление поднимаем до момента появления щелчка во время атаки. Можно играть соло Another Brick In The Wall 2!  
А на SG мне не хватило мощи. Наверно, надо делать что-нибудь другое. Или экспериментировать с усилением.  

### Фото

Ну и конечно, фото девайса, который изрядно заставил меня помучиться.  
Если руки доберутся -- выложу)  