---
layout: post
title:  'Bypass на поляризованном реле'
date:   2018-11-16 15:30:21
categories: schematics
tags: schematics diy bypass
---
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
		<center>
          <div class="modal-body">               
          </div>
		</center>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

<div class="thumbnails">
</div>

Идея делать bypass на реле далеко не нова, есть специальные сигнальные миниатюрные реле, которые переключаются быстро без щелчков, не требовательные к минимальному напряжению на контактах. Да и потребление их минимально.  
Но меня заинтересовал именно вариант с поляризованным реле или, как ещё ео называют, бистабильным.

### Что это такое?

Если вы ещё не сталкивались с поляризованными реле, то стоит пояснить.  
Обычные, не поляризованные (моностабильные) реле работают по принципу: подал напряжение - сработало, убрал - отключилось. Таким образом, для поддержания в замкнутом состоянии необходимо постоянно его запитывать.  
Поляризованные (бистабильные) же так названы именно из-за своей особенности: подал напряжение - сработало, убрал - ничего не отключилось. Чтобы отключить (сменить состояние), надо подать напряжение обратной полярности. Здесь мы можем экономить на питании, подавая только импульсы нужной полярности для переключения.  

### Драйвер

Чтобы управлять реле, надо поставить драйвер. Обычно это транзистор, например MOSFET с низким сопротивлением исток-сток. В нашем варианте их понадобится два.  
Соединим сток каждого на питание через резистор, а между ними подключим обмотку реле. В моей реализации стоит запастись напряжением. Например, для реле на 3 вольта удобно пользоваться 9 вольт напряжением (или наоборот, что актуально для педалек). Рассчитаем эти резисторы на примере реле IM41.  
* Падение напряжения на резисторе: Uр = U - Ur = 9в - 3в = 6в.
* Рабочий ток Iр = Ur / Rr = 3в / 90Ом = 33мА.
* Гасящее сопротивление R = Uр / Iр = 6в / 33мА = 180Ом.
Очень хорошо - этот резистор попадает в ряд E12.  
Таким образом, если мы откроем один из транзисторов, то реле переключится. Если открыть оба - просто будет течь ток, так что начальное состояние должно быть закрытое, то есть затвор посажен на землю.  

### Управление

Открывать транзисторы мы будем короткими импульсами.  
В голову сразу же пришла идея сделать дифференциаторы. Если взять прямоугольный сигнал и продифференцировать его, то на выходе получим экспоненциально спадающий сигнал. Вполне себе импульсы.  
Отфильтровать положительный труда не составит: ставим диод анодом к нему, и получаем только положительные импульсы.  
С отрицательными поступаем чуть хитрее. Дифференциатор строим с привязкой не к земле, а к напряжению питания. Диод разворачиваем. Получается, на выходе будет напряжение питания с выбросами (ну почти) до земли. Если его инвертировать, то итого мы имеем два импульсных сигнала с привязкой к земле.  
Для более крутых фронтов надо бы ещё по транзистору поставить на каждый сигнал, но работает и так.  

### Управляющий сигнал

Теперь самое простое: надо подать на вход дифференциатора прямоугольный сигнал.  
Проще всего это сделать кнопкой с фиксацией. Она будет переключать между землёй и питанием.  
Но что, если мы хотим без фиксации? D-триггер наш друг. Так же ему можно задать начальное состояние S входом (поставив на него RC цепочку), но придётся постараться с дребезгом контактов.  
Ещё один интересный вариант я расскажу в рамках новой ревизии педали "DriveIt!", где я применил такую схему (даже два раза).  

### Схема

<div class="thumbnails">
	<li class="tmb">
	<span class="thumbnail" role="button" tabindex="0" style="cursor: pointer;">
      <img src="/img/schematic/switch_schematic_preview.png" alt="/img/schematic/switch_schematic.png" class="img-thumbnail"><br>
	  <center>Cхема</center>
	</span>
   	</li>
</div>
<br>
Всё приведённое выше я отразил на схеме. К разъёму X3 подключается земля, к X1 питание 9В. Управление осуществляется через X2.  
Обратите внимание на VT3, затвор которого сидит на замле, запирая его. В то же время затвор VT1 подтянут к питанию, что открывает его и садит затвор VT2 на землю. В таком (изначальном) состоянии ток через VT2 и VT3 не течёт, что минимизирует потребление.  
Схема рассчитана на питание 9 вольт и реле IM41GR (последние две буквы обозначают корпус).  